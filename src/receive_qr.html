<div class="dashboard">
    <div class="dashboard-menu close">
        <div class="dashboard-menu-logo">
		            <a href="#/dashboard.html">
		                <div class="svg--logo-wallet"></div>
            </a>
        </div>
        <div class="dashboard-menu-burger">
            <div class="svg svg--menu-open"></div>
            <div class="svg svg--menu-close"></div>
        </div>
                    <div id="dashboard-current" class="dashboard-current"></div>
<script>
var current_time = XMR_DATE.getTime();

function update_xmr_value()
{
    xmr_updated_value = XMR_DATE.getTime();
    if(session_id)
    {
        $.ajax({
            url: 'getprice.php',
            dataType: 'json'
        }).done(function(response){
                var obj = response;
                if(obj)
                {
                    if(obj.hasOwnProperty('USD'))
                    {
                        var currentusdprice = cnUtil.parseMoney(obj['USD'].toString());
                        last_usd_value_real = parseFloat(obj['USD'].toString());
                        last_usd_value = currentusdprice.divide('1000000000000');
                        last_xmr_value = "<div class=\"dashboard-current-item\"><span><strong>1 XMR</strong> = $" + (obj['USD']*1.0) + "</span> USD</div>" + "<div class=\"dashboard-current-item\"><span><strong>1 XMR</strong> = " + (obj['BTC']*1.0) + " </span>BTC</div>";
                        document.getElementById("dashboard-current").innerHTML = last_xmr_value;
                        setTimeout(update_xmr_value, 60000);
                    }
                    else
                    {
                     setTimeout(update_xmr_value, 1000);
                    }
                }
                else
                {
                    setTimeout(update_xmr_value, 1000);
                }
            }).fail(function(){
            setTimeout(update_xmr_value, 1000);
        });
    }
    else
    {
        setTimeout(update_xmr_value, 1000);
    }
}
if(current_time - xmr_updated_value > 60000)
{
    update_xmr_value();
}
else
{   
    document.getElementById("dashboard-current").innerHTML = last_xmr_value;
}
</script>
<div class="dashboard-nav">
    <nav>
        <ul>
            <li>
                <a href="#/dashboard.html">
                    <span class="svg-wrap"><span class="svg--overview"></span></span>
                    <span class="nav-text"><span data-i18n="overview">Overview</span></span>
                </a>
            </li>
            <li>
                <a href="#/transactions.html">
                    <span class="svg-wrap"><span class="svg--transacrions"></span></span>
                    <span class="nav-text"><span data-i18n="transactions">Transactions</span></span>
                </a>
            </li>
            <li>
                <a href="#/send.html">
                    <span class="svg-wrap"><span class="svg--send"></span></span>
                    <span class="nav-text"><span data-i18n="send">Send</span></span>
                </a>
            </li>
            <li>
                <a href="#/receive.html">
                    <span class="svg-wrap"><span class="svg--receive"></span></span>
                    <span class="nav-text"><span data-i18n="receive">Receive</span></span>
                </a>
            </li>
        </ul>
        <hr/>
        <ul>
            <li>
                <a href="#/account.html">
                    <span class="svg-wrap"><span class="svg--profile"></span></span>
                    <span class="nav-text"><span data-i18n="account">Account</span></span>
                </a>
            </li>
            <li>
                <a href="#/support_login.html">
                    <span class="svg-wrap"><span class="svg--support"></span></span>
                    <span class="nav-text"><span data-i18n="support">Support</span></span>
                </a>
            </li>
            <li>
                <a id="logout" href="#">
                    <span class="svg-wrap"><span class="svg--quit"></span></span>
                    <span class="nav-text"><span data-i18n="quit">Quit</span></span>
                </a>
                <script>
                $("#logout").click(function(e)
                {
                    e.preventDefault();
                    var url = "logout.php";

                    $.ajax({
                           type: "POST",
                           url: url,
                           data: {
                            session_id: session_id
                           }
                         });  
                    window.location.href = '/';
                });
                </script>
            </li>
        </ul>
    </nav>
</div>            </div>
    <div class="dashboard-root">
        <div class="dashboard-body-wrap">
            <div class="dashboard-body">
                <div class="dashboard-body-header">
                    <div class="header-group">
                        <div class="header-title"><span data-i18n="title_receive">Receive</span></div>
                        <div class="header-subtitle">
                            <span class="header-subtitle-text"><span data-i18n="title_sub_receive">Use your address below to receive Monero.</span></span>
                                                    </div>
                    </div>
                                            <div class="header-balance">
                            <div class="header-balance-logo">
                                <span class="svg svg--monero-white"></span>
                            </div>
                            <div class="header-balance-hr"></div>
                            <div class="header-balance-current">
                                <div id="xmr_balance" class="header-balance-count"><div class="wave"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div></div>
                                <div id="xmr_unlocked_balance" class="header-balance-desc">XMR Balance</div>
                            </div>
                            <script>
                            var current_time = XMR_DATE.getTime();

                            function update_xmr_balance()
                            {
                                xmr_balance_updated_value = XMR_DATE.getTime();
                                if(session_id && xmr_canget_transactions == 1)
                                {
                                    $.ajax({
                                        type: "POST",
                                        url: '/getbalance.php',
                                        data: {
                                           session_id: session_id,
                                        }
                                    }).done(function(data){
                                    
                                            var check_timeout = 10000;
                                            var returned_data = data.split(":");
                                            if(returned_data.length == 2)
                                            {
                                                if(returned_data[0] != returned_data[1])
                                                {
                                                    real_xmr_balance = JSBigInt(returned_data[0]);
                                                    real_xmr_unlocked_balance = JSBigInt(returned_data[1]);
                                                    last_xmr_balance = (moneroBalance(real_xmr_balance.subtract(real_xmr_balance_pending)) + " XMR");
                                                    last_xmr_unlocked_balance = (moneroBalance(real_xmr_unlocked_balance.subtract(real_xmr_unlocked_balance_pending)) + " Unlocked")
                                                }
                                                else
                                                {
                                                    real_xmr_balance = JSBigInt(returned_data[0]);
                                                    real_xmr_unlocked_balance = JSBigInt(returned_data[0]);
                                                    
                                                    last_xmr_balance = moneroBalance(real_xmr_balance.subtract(real_xmr_balance_pending));
                                                    last_xmr_unlocked_balance = "XMR Balance";
                                                }
                                                var finalshowbalsup = "";
 
                                                var finalshowbal = last_xmr_balance;
                                                if(last_xmr_balance.length > 7)
                                                {
                                                    finalshowbalsup = last_xmr_balance.substr(7);
                                                    finalshowbal = last_xmr_balance.substr(0, 7)  + "<sup style=\"color: #B1B8C7; font-size: 18px; margin-left: 5px;\">" + finalshowbalsup + "</sup>";
                                                }
                                                document.getElementById("xmr_balance").innerHTML = finalshowbal;
                                                document.getElementById("xmr_unlocked_balance").innerHTML = last_xmr_unlocked_balance;
                                            }
                                            else
                                            {
                                                check_timeout = 1000;
                                            }
                                            
                                            setTimeout(update_xmr_balance, check_timeout);
                                            
                                    }).fail(function()
                                    {
                                        setTimeout(update_xmr_balance, 1000);
                                    });
                                }
                                else
                                {
                                    setTimeout(update_xmr_balance, 1000);
                                }
                            }
                            
                            function update_xmr_outputs()
                            {
                                if(session_id)
                                {
                                    $.ajax({
                                        type: "POST",
                                        url: '/getoutputs.php',
                                        data: {
                                           session_id: session_id,
                                        }
                                    }).done(function(data){
                                    
                                            var check_timeout = 60000;
                                            
                                            if(data != "0")
                                            {
                                                if(data != "1")
                                                {
                                                    var finaldata = JSON.parse(data);
                                                    if(finaldata)
                                                    {
                                                        var finalkeyimages = {}; 
                                                        finalkeyimages.content = new Array();
                                                        for(var i = 0; i < finaldata.length; i++)
                                                        {
                                                            if(finaldata[i].tx_pubkeys.length > 0)
                                                            {
                                                                finalkeyimages.content.push({});
                                                                var image_ret = cnUtil.generate_key_image_helper_rct(main_keys, finaldata[i].tx_pubkeys[0], finaldata[i].m_internal_output_index, finaldata[i].m_mask);
                                                                
                                                                var src_keys = [];
                                                                src_keys.push(image_ret.in_ephemeral.pub);
                                                                var sig_ret = cnUtil.generate_ring_signature(image_ret.image, image_ret.image, src_keys, image_ret.in_ephemeral.sec, 0);
                                                                
                                                                finalkeyimages.content[finalkeyimages.content.length-1].key_image = image_ret.image;
                                                                finalkeyimages.content[finalkeyimages.content.length-1].signature = sig_ret;
                                                            }
                                                            else
                                                            {
                                                                console.log("invalid transactions, please contact support");
                                                                break;
                                                            }
                                                        }
                                                        if(finalkeyimages.content.length == finaldata.length)
                                                        {
                                                            finalsend = JSON.stringify(finalkeyimages);
                                                            
                                                            $.ajax({
                                                                url: '/updateoutputs.php',
                                                                type: 'POST',
                                                                data: { session_id: session_id,
                                                                        keys : finalsend }
                                                            }).done(function(data){}).fail(function(){ console.log("failed to update outputs"); });
                                                        }
                                                    }
                                                    else
                                                    {
                                                        check_timeout = 1000;
                                                    }
                                                }
                                            }
                                            else
                                            {
                                                check_timeout = 1000;
                                            }
                                            
                                            setTimeout(update_xmr_outputs, check_timeout);
                                            
                                    }).fail(function()
                                    {
                                        setTimeout(update_xmr_outputs, 1000);
                                    });
                                }
                                else
                                {
                                    setTimeout(update_xmr_outputs, 1000);
                                }
                            }
                            
                            if(xmr_alreadyupdating_balance == 0)
                            {
                                xmr_alreadyupdating_balance = 1;
                                update_xmr_balance();
                            }
                            else
                            {   
                                var finalshowbalsup = "";

                                var finalshowbal = last_xmr_balance;
                                if(last_xmr_balance.length > 7)
                                {
                                    finalshowbalsup = last_xmr_balance.substr(7);
                                    finalshowbal = last_xmr_balance.substr(0, 7)  + "<sup style=\"color: #B1B8C7; font-size: 18px; margin-left: 5px;\">" + finalshowbalsup + "</sup>";
                                }
                                document.getElementById("xmr_balance").innerHTML = finalshowbal;
                                document.getElementById("xmr_unlocked_balance").innerHTML = last_xmr_unlocked_balance;
                            }
                            
                            if(xmr_alreadyupdating_outputs == 0)
                            {
                                xmr_alreadyupdating_outputs = 1;
                                update_xmr_outputs();
                            }
                            
                            </script>
                        </div>
                                    </div>
                <div class="dashboard-body-content">
                        <div class="dashboard-panel-tabs">
        <a href="#/receive.html" class="panel-tab">
            <span class="svg svg--receive-white"></span>
            <span class="title-text"><span data-i18n="receive_funds">Receive funds</span></span>
        </a>
        <a href="#/receive_qr.html" class="panel-tab active">
            <span class="svg svg--receive-qr-white"></span>
            <span class="title-text"><span data-i18n="receive_funds_qr">Receive funds via QR-code</span></span>
        </a>
    </div>
    <div class="dashboard-panel">
        <div class="dashboard-panel-header">
            <div class="dashboard-panel-header-title">
                <span class="title-text"><span data-i18n="receive_funds_qr">Receive funds via QR-code</span></span>
            </div>
        </div>
        <div class="dashboard-panel-body">
            <div class="panel-body-qr">
                <div class="panel-body-qr-image">
                    <img src="/i/qr.png" width="128" height="128">
                </div>
                <div class="panel-body-qr-content">
                    <label class="label label-top"><span data-i18n="label_receive_use_qr">Use this QR code to receive monero</span></label>
                    <div class="panel-body-qr-group">
                        <div class="qr-group-text">
                            monero:4A4yV4Dq43Ga33wBXMs4vCcbEfz5AG6joZKrBg4QFCPXBKXDXGDdLHXhZJnpS5G
                            WyA9dPGCv1vZtMdL5uoQC944iEYY4qR1?tx_payment_id=a591cd19d4e9b432d100e26e25dfd
                            10b73410b14454c8530cbc7b2a591acea3c
                        </div>
                        <button class="btn btn-group">
                            <span class="svg svg--copy-white"></span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="dashboard-inline">
        <div class="dashboard-inline-image">
            <div class="svg svg--image-qr"></div>
        </div>
        <div class="dashboard-inline-body">
            <div class="dashboard-inline-title"><span data-i18n="qr_code">QR-code</span></div>
            <div class="dashboard-inline-text"><span data-i18n="qr_code_text">QR code helps you rapidly receive payments. You don't need to e-mail or type-out a Monero address if someone is sending you funds. They may simply scan your QR code using a Monero application that supports this system.</span></div>
        </div>
    </div>
                </div>
            </div>
            <div class="dashboard-footer">
                <div class="dashboard-footer-links">
                    <select class="js-select-footer" name="">
                                                    <option selected value="en">English</option>
                                                    <option  value="fr">French</option>
                                                    <option  value="ru">Russian</option>
                                                    <option  value="ch_Sm">Chinese Simplified</option>
                                                    <option  value="jp">Japanese</option>
                                                    <option  value="it">Italian</option>
                                                    <option  value="bu">Dutch</option>
                                                    <option  value="ge">German</option>
                                                    <option  value="pr">Porteugese</option>
                                                    <option  value="sp">Spanish</option>
                                            </select>
																	<a href="#/terms_login.html"><span data-i18n="terms_of_use">Terms of Use</span></a>
						<a href="#/policy_login.html"><span data-i18n="privacy_policy">Privacy Policy</span></a>
											                </div>
               
                <div class="dashboard-footer-copy">Â© 2018 XMRWALLET.COM</div>
            </div>
        </div>
    </div>
</div>