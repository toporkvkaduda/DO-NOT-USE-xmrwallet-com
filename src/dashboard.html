<div class="dashboard">
    <div class="dashboard-menu close">
        <div class="dashboard-menu-logo">
		            <a href="#/dashboard.html">
		                <div class="svg--logo-wallet"></div>
            </a>
        </div>
        <div class="dashboard-menu-burger">
            <div class="svg svg--menu-open"></div>
            <div class="svg svg--menu-close"></div>
        </div>
<div id="dashboard-current" class="dashboard-current"></div>
<script>
var current_time = XMR_DATE.getTime();

function update_xmr_value()
{
    xmr_updated_value = XMR_DATE.getTime();
    if(session_id)
    {
        $.ajax({
            url: 'getprice.php',
            dataType: 'json'
        }).done(function(response){
                var obj = response;
                if(obj)
                {
                    if(obj.hasOwnProperty('USD'))
                    {
                        var currentusdprice = cnUtil.parseMoney(obj['USD'].toString());
                        last_usd_value_real = parseFloat(obj['USD'].toString());
                        last_usd_value = currentusdprice.divide('1000000000000');
                        last_xmr_value = "<div class=\"dashboard-current-item\"><span><strong>1 XMR</strong> = $" + (obj['USD']*1.0) + "</span> USD</div>" + "<div class=\"dashboard-current-item\"><span><strong>1 XMR</strong> = " + (obj['BTC']*1.0) + " </span>BTC</div>";
                        document.getElementById("dashboard-current").innerHTML = last_xmr_value;
                        setTimeout(update_xmr_value, 60000);
                    }
                    else
                    {
                     setTimeout(update_xmr_value, 1000);
                    }
                }
                else
                {
                    setTimeout(update_xmr_value, 1000);
                }
            }).fail(function(){
            setTimeout(update_xmr_value, 1000);
        });
    }
    else
    {
        setTimeout(update_xmr_value, 1000);
    }
}
if(current_time - xmr_updated_value > 60000)
{
    update_xmr_value();
}
else
{   
    document.getElementById("dashboard-current").innerHTML = last_xmr_value;
}
</script>
<div class="dashboard-nav">
    <nav>
        <ul>
            <li>
                <a href="#/dashboard.html" class="active">
                    <span class="svg-wrap"><span class="svg--overview"></span></span>
                    <span class="nav-text"><span data-i18n="overview">Overview</span></span>
                </a>
            </li>
            <li>
                <a href="#/transactions.html">
                    <span class="svg-wrap"><span class="svg--transacrions"></span></span>
                    <span class="nav-text"><span data-i18n="transactions">Transactions</span></span>
                </a>
            </li>
            <li>
                <a href="#/send.html">
                    <span class="svg-wrap"><span class="svg--send"></span></span>
                    <span class="nav-text"><span data-i18n="send">Send</span></span>
                </a>
            </li>
            <li>
                <a href="#/receive.html">
                    <span class="svg-wrap"><span class="svg--receive"></span></span>
                    <span class="nav-text"><span data-i18n="receive">Receive</span></span>
                </a>
            </li>
        </ul>
        <hr/>
        <ul>
            <li>
                <a href="#/account.html">
                    <span class="svg-wrap"><span class="svg--profile"></span></span>
                    <span class="nav-text"><span data-i18n="account">Account</span></span>
                </a>
            </li>
            <li>
                <a href="#/support_login.html">
                    <span class="svg-wrap"><span class="svg--support"></span></span>
                    <span class="nav-text"><span data-i18n="support">Support</span></span>
                </a>
            </li>
            <li>
                <a id="logout" href="#">
                    <span class="svg-wrap"><span class="svg--quit"></span></span>
                    <span class="nav-text"><span data-i18n="quit">Quit</span></span>
                </a>
                <script>
                $("#logout").click(function(e)
                {
                    e.preventDefault();
                    var url = "logout.php";

                    $.ajax({
                           type: "POST",
                           url: url,
                           data: {
                            session_id: session_id
                           }
                         });  
                    window.location.href = '/';
                });
                </script>
            </li>
        </ul>
    </nav>
</div>            </div>
    <div class="dashboard-root">
        <div class="dashboard-body-wrap">
            <div class="dashboard-body">
                <div class="dashboard-body-header">
                    <div class="header-group">
                        <div class="header-title"><span data-i18n="title_overview">Account overview</span></div>
                        <div class="header-subtitle">
                            <span class="header-subtitle-text"><span data-i18n="title_sub_overview">Your account overview and recent transactions.</span></span>
                                                    </div>
                    </div>
                                            <div id="xmrbal_full" class="header-balance" style="cursor:pointer;">
                            <div id="xmrbal_logo" class="header-balance-logo" style="cursor:pointer;">
                                <span id="curimg" class="svg svg--monero-white"></span>
                            </div>
                            <div class="header-balance-hr"></div>
                            <div class="header-balance-current">
                                <div id="xmr_balance" class="header-balance-count" style="cursor:pointer;"><div class="wave"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div></div>
                                <div id="xmr_unlocked_balance" class="header-balance-desc" style="cursor:pointer;">XMR Balance</div>
                            </div>
                            <script>
                            var current_time = XMR_DATE.getTime();
                            
                            function update_xmr_balance_helper(data)
                            {
                                
                                var check_timeout = 10000;
                                var returned_data = [];
                                if(data != "")
                                {
                                    returned_data = data.split(":");
                                }
                                else
                                {
                                    returned_data.push("!");
                                    returned_data.push("!");
                                }
                                if(returned_data.length == 2)
                                {
                                    if(returned_data[0] != returned_data[1])
                                    {
                                        real_xmr_balance = JSBigInt(returned_data[0]);
                                        real_xmr_unlocked_balance = JSBigInt(returned_data[1]);
                                        if(show_currency == 1)
                                        {
                                            last_xmr_balance = "$" + parseFloat(moneroBalance(real_xmr_balance.multiply(last_usd_value))).toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
                                            last_xmr_unlocked_balance = "$" + parseFloat(moneroBalance(real_xmr_unlocked_balance.multiply(last_usd_value))).toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2}) + " Unlocked";
                                        }
                                        else
                                        {
                                            last_xmr_balance = (moneroBalance(real_xmr_balance) + " XMR");
                                            last_xmr_unlocked_balance = (moneroBalance(real_xmr_unlocked_balance) + " Unlocked");
                                        }
                                    }
                                    else
                                    {
                                        if(returned_data[0] != "!")
                                        {
                                            real_xmr_balance = JSBigInt(returned_data[0]);
                                            real_xmr_unlocked_balance = JSBigInt(returned_data[0]);
                                        }                                                  
                                        if(show_currency == 1)
                                        {
                                            last_xmr_balance = "$" + parseFloat(moneroBalance(real_xmr_balance.multiply(last_usd_value))).toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
                                            last_xmr_unlocked_balance = "USD Balance";
                                        }
                                        else
                                        {
                                            last_xmr_balance = moneroBalance(real_xmr_balance);
                                            last_xmr_unlocked_balance = "XMR Balance";
                                        }
                                    }
                                    var finalshowbalsup = "";

                                    var finalshowbal = last_xmr_balance;
                                    if(show_currency == 0 && last_xmr_balance.length > 7)
                                    {
                                        finalshowbalsup = last_xmr_balance.substr(7);
                                        finalshowbal = last_xmr_balance.substr(0, 7)  + "<sup class=\"header-balance-pennies\">" + finalshowbalsup + "</sup>";
                                    }
                                    if(show_currency == 1)
                                    {
                                        if($('#curimg').hasClass('svg--monero-white'))
                                        {
                                            $('#curimg').removeClass('svg--monero-white').addClass('svg--usd-white');
                                        }
                                    }
                                    else
                                    {
                                        if($('#curimg').hasClass('svg--usd-white'))
                                        {
                                            $('#curimg').removeClass('svg--usd-white').addClass('svg--monero-white');
                                        }
                                    }
                                    document.getElementById("xmr_balance").innerHTML = finalshowbal;
                                    document.getElementById("xmr_unlocked_balance").innerHTML = last_xmr_unlocked_balance;
                                    last_xmr_bal_init = 1;
                                }
                                else
                                {
                                    check_timeout = 1000;
                                }
                                
                                return check_timeout;
                                
                            }
                            
                            function update_xmr_height()
                            {
                                if(session_id)
                                {
                                    $.ajax({
                                        type: "POST",
                                        url: '/getheightsync.php',
                                        data: {
                                           session_id: session_id,
                                        }
                                    }).done(function(data){
                                            if(data != '0')
                                            {
                                                
                                                if(data == '-1')
                                                {
                                                    xmr_updating_height = 0;
                                                    window.location.hash = "#/login.html";
                                                    load_page();
                                                    //setTimeout(update_xmr_height, 1000);
                                                }
                                                else
                                                {
                                                
                                                    var returned_main = data.split(":");
                                                    var end_main = parseInt(returned_main[1]);
                                                    
                                                    if(end_main == 1)
                                                    {
                                                        load_page();
                                                        setTimeout(update_xmr_height, 1000);
                                                    }
                                                    else
                                                    {
                                                        var returned_data = data.split("/");
                                                        
                                                        var beg = parseInt(returned_data[0]);
                                                        var end = parseInt(returned_data[1]);
                                                        
                                                        if(beg != 0 && end != 0)
                                                        {
                                                            wallet_height_beg = beg;
                                                            wallet_height_end = end;
                                                        }
                                                        
                                                        if(beg != end)
                                                        {
                                                            setTimeout(update_xmr_height, 1000);
                                                        }
                                                        else
                                                        {
                                                            setTimeout(update_xmr_height, 5000);
                                                        }
                                                    }
                                                }
                                            }
                                            else
                                            {
                                                setTimeout(update_xmr_height, 5000);
                                            }
                                            
                                    }).fail(function()
                                    {
                                        setTimeout(update_xmr_height, 1000);
                                    });
                                }
                                else
                                {
                                    setTimeout(update_xmr_height, 1000);
                                }
                            }
                            if(xmr_updating_height == 0)
                            {   
                                xmr_updating_height = 1;
                                update_xmr_height();
                            }
                            
                            function update_xmr_balance(timeout)
                            {
                                if(timeout == 2)
                                {
                                    update_xmr_balance_helper("");
                                }
                                else
                                {
                                    xmr_balance_updated_value = XMR_DATE.getTime();
                                    if(session_id && xmr_canget_transactions == 1 && xmr_canget_balance == 1 && wallet_height_beg == wallet_height_end && wallet_height_beg != 0)
                                    {
                                        $.ajax({
                                            type: "POST",
                                            url: '/getbalance.php',
                                            data: {
                                               session_id: session_id,
                                            }
                                        }).done(function(data){
                                                var check_timeout = update_xmr_balance_helper(data);
                                                if(timeout == 1)
                                                {
                                                    setTimeout(function(){ update_xmr_balance(1) }, check_timeout);
                                                }
                                                
                                        }).fail(function()
                                        {
                                            if(timeout == 1)
                                            {
                                                setTimeout(function(){ update_xmr_balance(1) }, 1000);
                                            }
                                        });
                                    }
                                    else
                                    {
                                        if(timeout == 1)
                                        {
                                            setTimeout(function(){ update_xmr_balance(1) }, 1000);
                                        }
                                    }
                                }
                            }
                            
                            //$("#xmr_balance").unbind().click(function(){ if(show_currency == 0 && last_usd_value.compare("0") > 0){ show_currency = 1; }else{ show_currency = 0; } update_xmr_balance(2); });
                            //$("#xmr_unlocked_balance").unbind().click(function(){ if(show_currency == 0 && last_usd_value.compare("0") > 0){ show_currency = 1; }else{ show_currency = 0; } update_xmr_balance(2); });
                            //$("#xmrbal_logo").unbind().click(function(){ if(show_currency == 0 && last_usd_value.compare("0") > 0){ show_currency = 1; }else{ show_currency = 0; } update_xmr_balance(2); });
                            $("#xmrbal_full").unbind().click(function(){ if(show_currency == 0 && last_usd_value.compare("0") > 0){ show_currency = 1; }else{ show_currency = 0; } update_xmr_balance(2); });
                            function update_xmr_outputs()
                            {
                                if(session_id && wallet_height_beg == wallet_height_end && wallet_height_beg != 0)
                                {
                                    $.ajax({
                                        type: "POST",
                                        url: '/getoutputs.php',
                                        data: {
                                           session_id: session_id,
                                        }
                                    }).done(function(data){
                                    
                                            var check_timeout = 60000;
                                           
                                            try
                                            {
                                                
                                                if(data != "0")
                                                {
                                                    if(data != "1")
                                                    {
                                                        var finaldata = JSON.parse(data);
                                                        if(finaldata)
                                                        {
                                                            var finalkeyimages = {}; 
                                                            finalkeyimages.content = new Array();
                                                            var donotprocessthis = 0;
                                                            for(var i = 0; i < finaldata.length-1; i++)
                                                            {
                                                                if(finaldata[i] != null)
                                                                {
                                                                    if(typeof finaldata[i].tx_pubkeys !== 'undefined' && finaldata[i].tx_pubkeys.length > 0)
                                                                    {
                                                                        finalkeyimages.content.push({});
                                                                        var image_ret;
                                                                        
                                                                        try
                                                                        {
                                                                            image_ret = cnUtil.generate_key_image_helper_rct(main_keys, finaldata[i].tx_pubkeys[0], finaldata[i].m_internal_output_index, finaldata[i].m_mask);
                                                                        }
                                                                        catch(e)
                                                                        {
                                                                            console.log("trying to get outputs again...");
                                                                            donotprocessthis = 1;
                                                                            check_timeout = 1000;
                                                                            break;
                                                                        }
                                                                        
                                                                        var src_keys = [];
                                                                        src_keys.push(image_ret.in_ephemeral.pub);
                                                   
                                                                        var sig_ret = cnUtil.generate_ring_signature(image_ret.image, image_ret.image, src_keys, image_ret.in_ephemeral.sec, 0);
                                                                        
                                                                        finalkeyimages.content[finalkeyimages.content.length-1].key_image = image_ret.image;
                                                                        finalkeyimages.content[finalkeyimages.content.length-1].signature = sig_ret;
                                                                    }
                                                                    else
                                                                    {
                                                                        console.log("invalid transactions, please contact support");
                                                                        break;
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    if(finaldata.length == 1)
                                                                    {
                                                                        xmr_canget_balance = 1;
                                                                    }
                                                                    else
                                                                    {
                                                                        console.log("invalid transactions, please contact support");
                                                                        break;
                                                                    }
                                                                }
                                                                
                                                            }
                                                            if(donotprocessthis == 0 && finalkeyimages.content.length == finaldata.length-1)
                                                            {
                                                                if(finalkeyimages.content.length == 0)
                                                                {
                                                                    xmr_canget_balance = 1;
                                                                    setTimeout(update_xmr_outputs, check_timeout);
                                                                }
                                                                else
                                                                {
                                                                    finalsend = JSON.stringify(finalkeyimages);
                                                                    
                                                                    $.ajax({
                                                                        url: '/updateoutputs.php',
                                                                        type: 'POST',
                                                                        data: { session_id: session_id,
                                                                                keys : finalsend }
                                                                    }).done(function(data){ if(data == "0"){ check_timeout = 1000; setTimeout(update_xmr_outputs, check_timeout); return; }  if(finaldata[finaldata.length-1].extra == 1){ check_timeout = 100; }else{ xmr_canget_balance = 1; } setTimeout(update_xmr_outputs, check_timeout); }).fail(function(){ check_timeout = 1000; console.log("failed to update outputs"); setTimeout(update_xmr_outputs, check_timeout); });
                                                                }
                                                            }
                                                            else
                                                            {
                                                                setTimeout(update_xmr_outputs, check_timeout);
                                                            }
                                                        }
                                                        else
                                                        {
                                                            check_timeout = 1000;
                                                            setTimeout(update_xmr_outputs, check_timeout);
                                                        }
                                                    }
                                                    else
                                                    {
                                                        xmr_canget_balance = 1;
                                                        setTimeout(update_xmr_outputs, check_timeout);
                                                    }
                                                    
                                                }
                                                else
                                                {
                                                    check_timeout = 1000;
                                                    setTimeout(update_xmr_outputs, check_timeout);
                                                }
                                            }
                                            catch(e)
                                            {
                                                check_timeout = 1000;
                                            }
                                            
                                        
                                            
                                    }).fail(function()
                                    {
                                        setTimeout(update_xmr_outputs, 1000);
                                    });
                                }
                                else
                                {
                                    setTimeout(update_xmr_outputs, 1000);
                                }
                            }
                            
                            if(xmr_alreadyupdating_balance == 0)
                            {
                                xmr_alreadyupdating_balance = 1;
                                update_xmr_balance(1);
                            }
                            else
                            {   
                                if(last_xmr_bal_init == 1)
                                {
                                    var finalshowbalsup = "";

                                    var finalshowbal = last_xmr_balance;
                                    if(show_currency == 0 && last_xmr_balance.length > 7)
                                    {
                                        finalshowbalsup = last_xmr_balance.substr(7);
                                        finalshowbal = last_xmr_balance.substr(0, 7)  + "<sup class=\"header-balance-pennies\">" + finalshowbalsup + "</sup>";
                                    }
                                    if(show_currency == 1)
                                    {
                                        if($('#curimg').hasClass('svg--monero-white'))
                                        {
                                            $('#curimg').removeClass('svg--monero-white').addClass('svg--usd-white');
                                        }
                                    }
                                    else
                                    {
                                        if($('#curimg').hasClass('svg--usd-white'))
                                        {
                                            $('#curimg').removeClass('svg--usd-white').addClass('svg--monero-white');
                                        }
                                    }
                                    document.getElementById("xmr_balance").innerHTML = finalshowbal;
                                    document.getElementById("xmr_unlocked_balance").innerHTML = last_xmr_unlocked_balance;
                                }
                            }
                            
                            if(xmr_alreadyupdating_outputs == 0)
                            {
                                xmr_alreadyupdating_outputs = 1;
                                update_xmr_outputs();
                            }
                            
                            </script>
                        </div>
                                    </div>
                <div class="dashboard-body-content">
                        <script>document.title = "Dashboard | xmrwallet.com";</script>
    <script>
    if(typeof session_id === 'undefined' || session_id === null || xmrwallet_spendkey == '' || xmrwallet_viewkey == '' || xmrwallet_address == '' || session_id == '')
    {
        window.location.href = "/";
    }
    </script>
    <div class="dashboard-sync-progress">
        <div class="dashboard-sync-progress-bg">
            <div id="heightbar-left" class="bg-left"></div>
            <div id="heightbar-right" class="bg-right"></div>
        </div>
        <div class="dashboard-sync-progress-bar">
            <div id="heightbar" class="bar"></div>
        </div>
        <div id="heightbartext" class="dashboard-sync-progress-text"></div>
    </div>
    
    <script>
    current_page = 'dashboard';
    
    if(old_syncing_height != '')
    {
        document.getElementById("heightbartext").innerHTML = old_syncing_height;
    }
    else
    {
        document.getElementById("heightbartext").innerHTML = 'syncing...';
    }
    
    function setHeightNar(progress)
    {
		var left = document.getElementById("heightbar-left"),
			right = document.getElementById("heightbar-right"),
			elem = document.getElementById("heightbar");
        if(left && right && elem)
        {
            left.style.width = progress + '%';
            right.style.width = 100 - progress + '%';
            elem.style.width = progress + '%';
        }
    }
    
    function update_xmr_height_dash()
    {
        if(session_id && current_page == 'dashboard')
        {
            var beg = wallet_height_beg;
            var end = wallet_height_end;
            
            if(beg != 0 && end != 0)
            {
                if(end >= beg)
                {
                    var finalv = Math.ceil((beg / end)*100);
                    if(finalv > 100)
                    {
                        finalv = 100;
                    }
                    else if(((beg / end)*100) >= 99 && ((beg / end)*100) < 100)
                    {
                        finalv = 99;
                    }
                    setHeightNar(finalv);
                    var elem2 = document.getElementById("heightbartext");
                    var sprite = beg === end
                        ? '<span class="svg svg--status-checked"></span>'
                        : '<span class="svg svg--status-process"></span>';
                    old_syncing_height = sprite + ' Height (' + wallet_height_beg.toString() + '/' + wallet_height_end.toString() + ')';
                    elem2.innerHTML = old_syncing_height;
                }
            }  
            setTimeout(update_xmr_height_dash, 1000);
        }
        else
        {
            setTimeout(update_xmr_height_dash, 1000);
        }
    }
    if(xmr_updating_height_dash == 0)
    {   
        xmr_updating_height_dash = 1;
        update_xmr_height_dash();
    }
    </script>

    <div class="dashboard-widgets-sections">
        <div class="row">
            <div class="col-xs-12 col-sm-4">
                <div class="dashboard-widgets-section">
                    <div class="section-title">
                        <span data-i18n="transactions">Transactions</span>
                    </div>
                    <a href="#/transactions.html" class="btn btn-section"><span data-i18n="view">View</span></a>
                    <div class="svg svg--section-transacrions"></div>
                    <div class="svg svg--section-transacrions-white"></div>
                </div>
            </div>
            <div class="col-xs-12 col-sm-4">
                <div class="dashboard-widgets-section">
                    <div class="section-title">
                        <span data-i18n="send">Send</span>
                    </div>
                    <a href="#/send.html" class="btn btn-section"><span data-i18n="view">View</span></a>
                    <div class="svg svg--section-send"></div>
                    <div class="svg svg--section-send-white"></div>
                </div>
            </div>
            <div class="col-xs-12 col-sm-4">
                <div class="dashboard-widgets-section">
                    <div class="section-title">
                        <span data-i18n="receive">Receive</span>
                    </div>
                    <a href="#/receive.html" class="btn btn-section"><span data-i18n="view">View</span></a>
                    <div class="svg svg--section-receive"></div>
                    <div class="svg svg--section-receive-white"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="dashboard-panel">
        <div class="dashboard-panel-header">
            <div class="dashboard-panel-header-title">
                <span class="svg svg--address-white"></span>
                <span class="title-text"><span data-i18n="your_address">Your address</span>&nbsp;&nbsp;|&nbsp;&nbsp;<span id="viewsub" style="color:#1F85DE;text-decoration:underline; font-size: 13px;cursor:pointer;">View subaddresses</span></span>
            </div>
        </div>
        <div class="dashboard-panel-body" style="padding-top: 20px; padding-bottom: 20px;">
            <div class="input-group">
                <input id="public_address" type="text" class="form-control" style="color: #474E5D; border-color: #D9DCE7; background-color: #F1F2F6;" readonly>
                <div class="input-group-btn">
                    <button class="btn btn-group" data-clipboard-target="#public_address">
                        <span class="svg--copy-white"></span>
                    </button>
                </div>
            </div>
        </div>
        
        <div id="subaddressdiv" style="display: none;">
        <div class="dashboard-panel-body" style="padding-top: 10px; padding-bottom: 5px;">
            <div class="input-group">
                <input id="subaddress_1" type="text" class="form-control" style="color: #474E5D; border-color: #D9DCE7; background-color: #F1F2F6;" readonly>
                <div class="input-group-btn">
                    <button class="btn btn-group" data-clipboard-target="#subaddress_1">
                        <span class="svg--copy-white"></span>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="dashboard-panel-body" style="padding-top: 5px; padding-bottom: 5px;">
            <div class="input-group">
                <input id="subaddress_2" type="text" class="form-control" style="color: #474E5D; border-color: #D9DCE7; background-color: #F1F2F6;" readonly>
                <div class="input-group-btn">
                    <button class="btn btn-group" data-clipboard-target="#subaddress_2">
                        <span class="svg--copy-white"></span>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="dashboard-panel-body" style="padding-top: 5px; padding-bottom: 5px;">
            <div class="input-group">
                <input id="subaddress_3" type="text" class="form-control" style="color: #474E5D; border-color: #D9DCE7; background-color: #F1F2F6;" readonly>
                <div class="input-group-btn">
                    <button class="btn btn-group" data-clipboard-target="#subaddress_3">
                        <span class="svg--copy-white"></span>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="dashboard-panel-body" style="padding-top: 5px; padding-bottom: 20px;">
            <div class="input-group">
                <input id="subaddress_4" type="text" class="form-control" style="color: #474E5D; border-color: #D9DCE7; background-color: #F1F2F6;" readonly>
                <div class="input-group-btn">
                    <button class="btn btn-group" data-clipboard-target="#subaddress_4">
                        <span class="svg--copy-white"></span>
                    </button>
                </div>
            </div>
        </div>
        </div>
        <script>
        document.getElementById('viewsub').onclick = function()
        {
            if(document.getElementById('subaddressdiv').style.display == "block")
            {
                document.getElementById('subaddressdiv').style.display = "none";
                document.getElementById('viewsub').innerHTML = "View subaddresses";
            }
            else
            {
                document.getElementById('subaddressdiv').style.display = "block";
                document.getElementById('viewsub').innerHTML = "Hide subaddresses";
            }
        }
        </script>
    </div>
    <script>
    new ClipboardJS('.btn');
    if(xmrwallet_address)
    {
        $("#public_address").val(xmrwallet_address);
    }
    </script>
    <div id="pendingdiv" style="display: none;" class="dashboard-panel">
    <div class="dashboard-panel-header">
        <div class="dashboard-panel-header-title">
            <span class="svg svg--transacrions-white"></span>
            <span class="title-text">Pending Transactions</span>
        </div>
    </div>
    <div class="dashboard-panel-body">
        <table class="table table-offset">
            <thead>
            <tr>
                <td>Date</td>
                <td class="column-transaction"><span data-i18n="table_transaction_id">Transaction ID</span></td>
                <td>Confirm.</td>
                <td class="column-right"><span data-i18n="table_value_xmr">Value XMR</span></td>
            </tr>
            </thead>
            <tbody id="pendingtxdata">
            </tbody>
        </table>
    </div>
</div>

<div class="dashboard-panel">
    <div class="dashboard-panel-header">
        <div class="dashboard-panel-header-title">
            <span class="svg svg--transacrions-white"></span>
            <span class="title-text"><span data-i18n="table_transaction_history">Transaction history</span></span>
        </div>
    </div>
    <div class="dashboard-panel-body">
    <div class="table-horizontal-scroll">
        <table class="table table-offset">
            <thead>
            <tr>
                <td>Date</td>
                <td class="column-transaction"><span data-i18n="table_transaction_id">Transaction ID</span></td>
                <td>Confirm.</td>
                <td class="column-right"><span data-i18n="table_value_xmr">Value XMR</span></td>
            </tr>
            </thead>
            <tbody id="txdata">
            </tbody>
        </table>
        <div class="table-pagination">
            <div class="table-pagination-left">
                <a id="page_back" class="apage btn btn-section"><span data-i18n="table_back">Back</span></a>
                <span id="p_b">&nbsp;</span>
            </div>
            <div class="table-pagination-center">
                <div id="pagedata" class="btn-group-inline">
                <img src="i/loadingtransaction.svg" alt="loading transactions...">
                </div>
            </div>
            <div class="table-pagination-right">
                <a id="page_next" class="apage btn btn-section"><span data-i18n="table_next">Next</span></a>
                <span id="p_n">&nbsp;</span>
            </div>
        </div>
    </div>
    </div>
</div>

<script>
var current_time = XMR_DATE.getTime();

function update_transaction_data(data)
{
        $('#pagedata').empty();
    totalpages = parseInt(data[0]['pages']);

    add_dots_start = 0;
    add_dots_end = 0;
    if(transaction_atpage > 6)
    {
        add_dots_start = 1;
    }
    if(totalpages - transaction_atpage > 6)
    {
        add_dots_end = 1;
    }
    
    if(transaction_atpage == totalpages)
    {
        $('#page_next').hide();
    }
    else
    {
        $('#page_next').show();
    }
    
    if(transaction_atpage == 1)
    {
        $('#page_back').hide();
    }
    else
    {
        $('#page_back').show();
    }
    
    var finalpagedata = '';
    
    if(totalpages > 6)
    {
        for(var i = transaction_atpage-2; i < transaction_atpage+3; i++)
        {
            if(i > totalpages)
            {
                break;
            }
            if(i <= 0)
            {
                continue;
            }
            if(i==transaction_atpage-2 && transaction_atpage > 3)
            {
                finalpagedata += '<a id="page_' + (i-1).toString() + '" class="apage btn btn-section">...</a>';
            }
            finalpagedata += '<a id="page_' + i.toString() + '" class="apage btn btn-section';
            if(transaction_atpage == i)
            {
                finalpagedata += ' active';
            }
            if(i == transaction_atpage+7)
            {
                finalpagedata += '">' + totalpages.toString() + '</a>';
            }
            else
            {
                finalpagedata += '">' +i.toString() + '</a>';
            }
            if(i==transaction_atpage+2 && i < totalpages)
            {
                finalpagedata += '<a id="page_' + (i+1).toString() + '" class="apage btn btn-section">...</a>';
            }
        }
    }
    else
    {
        for(var i = 1; i <= totalpages; i++)
        {
            finalpagedata += '<a id="page_' + i.toString() + '" class="apage btn btn-section';
            if(transaction_atpage == i)
            {
                finalpagedata += ' active';
            }
            finalpagedata += '">' + i.toString() + '</a>';
        }
    }
    
    $("#pagedata").html(finalpagedata);
    
    $(".apage").unbind().click(
      function(event) {
         event.preventDefault();
         account_timeout = new Date().getTime();
         var nofire = 0;
         var dataval = $(this).attr('id').slice(5);
         if(dataval == 'next')
         {
            transaction_atpage += 1;
         }
         else if(dataval == 'back')
         {
            if(transaction_atpage > 1)
            {
                transaction_atpage -= 1;
            }
            else
            {
                transaction_atpage = 1;
            }
         }
         else
         {
            if(transaction_atpage == parseInt(dataval))
            {
                nofire = 1;
            }
            transaction_atpage = parseInt(dataval);
         }
         if(nofire == 0)
         {
            $("#pagedata").html("<img src=\"i/loadingtransaction.svg\" alt=\"loading transactions...\">");
            update_transactions(0);
         }
      }
    );
        
    var finaltxdata = '';
    var finalpendingtxdata = '';
    
    var unamount_total = new JSBigInt(0);
    var amount_total = new JSBigInt(0);

    for(var i = 1; i < data.length; i++)
    {
        var d = new Date(0);
        d.setUTCSeconds(parseInt(data[i]['time']));
        if(data[i]['type'] != 'pendingtx')
        {
            var datashowconfirm = data[i]['confirmations'];
            if(data[i]['type'] == 'in' && datashowconfirm == "10/10")
            {
                finaltxdata += '<tr class="data-status--received">';
            }
            else if(data[i]['type'] == 'in')
            {
                finaltxdata += '<tr class="data-status--checking">';
            }
            else if(data[i]['type'] == 'out')
            {
                finaltxdata += '<tr class="data-status--send">';
            }
            else if(data[i]['type'] == 'pool' || data[i]['type'] == 'pending')
            {
                finaltxdata += '<tr class="data-status--pending">';
                datashowconfirm = "0/10";
            }
            else if(data[i]['type'] == 'swept')
            {
                finaltxdata += '<tr class="data-status--send">';
            }
            finaltxdata += '<td data-label="Date received" data-i18n-key="table_date_received" data-i18n-name="data-label"><div class="data-received">' + d.toLocaleString() + '</div></td>';
            finaltxdata += '<td data-label="Transaction ID" data-i18n-key="table_transaction_id" data-i18n-name="data-label"><div class="data-id"><a target="_blank" ';
            if(data[i]['type'] == 'in')
            {
                finaltxdata += 'class="payment-received" ';
            }
            else if(data[i]['type'] == 'out')
            {
                finaltxdata += 'class="payment-sent" ';
            }
            else if(data[i]['type'] == 'swept')
            {
                finaltxdata += 'class="payment-swept" ';
            }
            else if(data[i]['type'] == 'pool' || data[i]['type'] == 'pending')
            {
                finaltxdata += 'class="payment-pool" ';
            }
            
            if(data[i]['type'] == 'swept')
            {
                data[i]['payment_id'] = '0000000000000000';
                //var txsplit = data[i]['txid'].split(":");
                //data[i]['txid'] = txsplit[0];
                data[i]['txid'] = 'Unknown transaction id (Swept Transaction)';
            }
            
            finaltxdata += 'href="https://xmrchain.net/search?value=' + data[i]['txid'] + '">' + data[i]['txid'] + '</a>';
            if(data[i]['payment_id'] != '0000000000000000')
            {
               finaltxdata += '<br><span style="font-size: 10px; color: #C9C9C9;">#' + data[i]['payment_id'] + '</span>'; 
            }
            finaltxdata += '</div></td>';
            if(datashowconfirm == "10/10")
            {
                datashowconfirm = "&#10004;";
            }
            finaltxdata += '<td data-label="Mixin" data-i18n-key="table_mixin" data-i18n-name="data-label"><div class="data-mixin">' + datashowconfirm + '</div></td>';
            finaltxdata += '<td data-label="Value XMR" data-i18n-key="table_value_xmr" data-i18n-name="data-label" class="column-right"><div class="data-value">';
            if(data[i]['type'] == 'in')
            {
                finaltxdata += '+';
            }
            else if(data[i]['type'] == 'out')
            {
                finaltxdata += '-';
            }
            else if(data[i]['type'] == 'pool' || data[i]['type'] == 'pending')
            {
                finaltxdata += '+';
            }
            else if(data[i]['type'] == 'swept')
            {
                finaltxdata += '-';
            }
            if(data[i]['amount'] != -1)
            {
                finaltxdata += moneroBalance(data[i]['amount']) + '</div></td>';
            }
            else
            {
                finaltxdata += 'Error</div></td>';
            }
            finaltxdata += '</tr>';
        }
        else
        {
            finalpendingtxdata += '<tr>';
            finalpendingtxdata += '<td style="font-size: 10px;">' + d.toLocaleString() + '</td>';
            finalpendingtxdata += '<td><a target="_blank" ';
            finalpendingtxdata += 'class="payment-pool" ';
            
            finalpendingtxdata += 'href="https://xmrchain.net/search?value=' + data[i]['txid'] + '">' + data[i]['txid'] + '</a>';
            if(data[i]['payment_id'] != '0000000000000000')
            {
               finalpendingtxdata += '<br><span style="font-size: 10px; color: #C9C9C9;">#' + data[i]['payment_id'] + '</span>'; 
            }
            finalpendingtxdata += '</td>';
            var datashowconfirm = data[i]['confirmations'];
            if(datashowconfirm == "10/10")
            {
                datashowconfirm = "&#10004;";
            }
            finalpendingtxdata += '<td>' + datashowconfirm + '</td>';
            finalpendingtxdata += '<td class="column-right">';
            finalpendingtxdata += '-';
            finalpendingtxdata += moneroBalance(data[i]['amount']) + '</td>';
            finalpendingtxdata += '</tr>';
            
            amount_total = amount_total.add(data[i]['amount']);
            amount_total = amount_total.add(data[i]['fee']);
            unamount_total = unamount_total.add(data[i]['unamount']);
            
        }
    }
    
        $("#txdata").html(finaltxdata);
        
    real_xmr_balance_pending = amount_total;
    real_xmr_unlocked_balance_pending = unamount_total;
    
    if(finalpendingtxdata)
    {
        $("#pendingtxdata").html(finalpendingtxdata);
        $("#pendingdiv").show();
    }
    else
    {
        $("#pendingdiv").hide();
    }
    
}

function update_subs()
{
    if(xmr_subaddresses.length >= 4)
    {
        sub1 = document.getElementById("subaddress_1");
        sub2 = document.getElementById("subaddress_2");
        sub3 = document.getElementById("subaddress_3");
        sub4 = document.getElementById("subaddress_4");
        
        if(sub1 && sub2 && sub3 && sub4)
        {
            sub1.value = xmr_subaddresses[0];
            sub2.value = xmr_subaddresses[1];
            sub3.value = xmr_subaddresses[2];
            sub4.value = xmr_subaddresses[3];
        }
    }
}

function update_transactions(with_timeout)
{
    transactions_updated_value = XMR_DATE.getTime();
        if(session_id && xmr_canget_transactions == 1 && document.getElementById("txdata") != null && wallet_height_beg == wallet_height_end && wallet_height_beg != 0)
    {
            $.ajax({
            type: "POST",
            url: '/gettransactions.php',
            data: {
               session_id: session_id,
               page: transaction_atpage,
               sort: 0
            }
        }).done(function(data){
                if(data != '0' && data != '1' && data != '')
                {
                    last_transactions = JSON.parse(data);
                    update_transaction_data(last_transactions);
                    if(with_timeout == 1)
                    {
                        setTimeout(function(){ update_transactions(1) }, 10000);
                    }
                }
                else
                {
                    if(with_timeout == 1)
                    {
                        setTimeout(function(){ update_transactions(1) }, 1000);
                    }
                }
            }).fail(function()
            {
                if(with_timeout == 1)
                { 
                    setTimeout(function(){ update_transactions(1) }, 1000);
                }
            });
            
            
             $.ajax({
            type: "POST",
            url: '/getsubaddresses.php',
            data: {
               session_id: session_id,
               page: transaction_atpage,
               sort: 0,
               used: 0
            }
        }).done(function(data){
                try {
                    xmr_subaddresses = JSON.parse(data);                 
                    update_subs();
                }
                catch(e)
                {
                
                }
            }).fail(function()
            {
            });
    }
    else
    {
        if(with_timeout == 1)
        {
            setTimeout(function(){ update_transactions(1) }, 1000);
        }
    }
}
if(xmr_alreadyupdating_value == 0)
{
    xmr_alreadyupdating_value = 1;
    update_transactions(1);
}
else
{
    if(last_transactions)
    {
        update_transaction_data(last_transactions);
    }
}

update_subs();
</script>                </div>
            </div>
            <div class="dashboard-footer">
                <div class="dashboard-footer-links">
                    <select class="js-select-footer" name="">
                                                    <option selected value="en">English</option>
                                                    <option  value="fr">French</option>
                                                    <option  value="ru">Russian</option>
                                                    <option  value="ch_Sm">Chinese Simplified</option>
                                                    <option  value="jp">Japanese</option>
                                                    <option  value="it">Italian</option>
                                                    <option  value="bu">Dutch</option>
                                                    <option  value="ge">German</option>
                                                    <option  value="pr">Porteugese</option>
                                                    <option  value="sp">Spanish</option>
                                            </select>
																	<a href="#/terms_login.html"><span data-i18n="terms_of_use">Terms of Use</span></a>
						<a href="#/policy_login.html"><span data-i18n="privacy_policy">Privacy Policy</span></a>
						                        <a target="_blank" href="https://github.com/XMRWallet">GitHub</a>
                        <a target="_blank" href="https://twitter.com/xmrwalletcom">Twitter</a>
					                </div>
             
                <div class="dashboard-footer-copy"> 2018-2024 XMRWALLET.COM <span style="position: relative; color: #fff; left: 3px; font-size: 12px; font-weight: bold; background-color: #383F4D; padding: 6px;">v0.18.0.0</span></div>
            </div>
        </div>
    </div>
</div>